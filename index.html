<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Montaria</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f7f7f7;
            overflow: hidden;
        }
        canvas {
            display: block;
            margin: 20px auto;
            background-image: url('background.png'); /* Fundo estilizado */
            background-size: cover;
            border: 2px solid #fff;
        }
        #share-btn {
            margin: 10px;
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <button id="share-btn" style="display: none;">Compartilhar Pontuação</button>

    <script src="https://telegram.org/js/games.js"></script>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        const bullImage = new Image();
        bullImage.src = "bull.png"; // Touro com transparência

        let bullX = canvas.width / 2;
        let bullY = canvas.height / 2;
        let velocityX = 5;
        let velocityY = -5;
        let rotation = 0;
        let score = 0;

        let gameActive = true;

        function drawBull() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            ctx.save();
            ctx.translate(bullX, bullY);
            ctx.rotate(rotation);
            ctx.drawImage(bullImage, -50, -50, 100, 100); // Centraliza o touro
            ctx.restore();

            updateMovement();
        }

        function updateMovement() {
            if (!gameActive) return;

            bullX += velocityX;
            bullY += velocityY;
            rotation += 0.1;

            // Rebater nas bordas
            if (bullX < 50 || bullX > canvas.width - 50) velocityX *= -1;
            if (bullY < 50 || bullY > canvas.height - 50) velocityY *= -1;

            // Verificar se caiu
            if (bullY > canvas.height - 50) endGame();

            score += 1; // Incrementa pontuação
            requestAnimationFrame(drawBull);
        }

        function endGame() {
            gameActive = false;
            alert(`Você perdeu! Pontuação: ${score}`);
            document.getElementById('share-btn').style.display = 'block';
        }

        // Compartilhar pontuação no Telegram
        document.getElementById('share-btn').onclick = () => {
            TelegramGameProxy.shareScore();
        };

        bullImage.onload = drawBull; // Inicia o jogo ao carregar a imagem
    </script>
</body>
</html>
